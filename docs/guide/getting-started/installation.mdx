import SupportedBrowser from "../../../components/browser-table"
import { DrawingPinIcon } from '@radix-ui/react-icons';
import { Image } from "../../../components/ui/image"
import { Keyboard } from "../../../components/ui/keyboard"

# Get Started 

In this section we will walk you through what you will need to start using Zephyr and enjoy its benefits. If you are curious to read more before about us, you can dive into our [recipes](/#recipes) and [features](/guide/features). Below guide is written based on Google chrome thus other browser's behavior might differ.

## Installation and setup
#### 1. Install Chrome Extension 

Head to Chrome Web Store to install our chrome extension - [Zephyr Mission Control](https://chromewebstore.google.com/detail/zephyr-mission-control/liflhldchhinbaeplljlplhnbkdidedn). Click on **Add to Chrome** and confirm with **Add extension**. After you finish remember to **pin** the extension by clicking on <DrawingPinIcon className="inline -rotate-45"/> on extension management tab to provide you a quicker access to Zephyr's side panel.

:::info
Our chrome extension is only supported on Chromium based browsers. See a list of supported browser [below](#browser-support).
:::

#### 2. Log in 

Once you click on <img src="/logo.png" className="inline h-5 w-5 brightness-[3]"/> the side panel will pop up and prompt you to log in (if you are using Microsoft Edge you will need to click on **Open Side Panel**).

<Image src={"/log-in.png"} />

:::details
While we are loggin you in, we are storing your authorization information locally under `~/.zephyr` in your root directly. Whenever you want to clean up your local profile information (they are JWT claims for each of the project you deployed through Zephyr), you can enter your root directory and run: 
```sh 
rm rf ~/.zephyr 
```
:::

Now you have created an account and the side panel is empty - hold up! We will get into how to use our dashboard in a bit. Let's deploy an app through Zephyr so you can see a live example of how to use our side panel.

#### 3. Create a react app

:::tip title="Prerequisites"
- npm >=10
- node >=20 

If you don't have `nvm` to manage your node version yet, head to [the official nvm guide](https://github.com/nvm-sh/nvm) to install it.
```sh 
nvm use 20 
```
:::


Let's have a standalone react app for simplification. At the end of this walk-through we will have a react app, using [Nx](https://nx.dev/) as workspace manager and [Rspack](https://www.rspack.dev/) as bundler. 

```sh title="Terminal"
npx create-nx-workspace@latest my-first-mf-app --preset=react-standalone
Need to install the following packages:
create-nx-workspace@19.2.2
Ok to proceed? (y) 
```
Press <Keyboard shortcuts={["y", "Enter"]}/> and then choose the following highlighted options.

Choose `Rspack` as bundler option.
```sh title="Terminal" {6}
NX   Let's create a new workspace [https://nx.dev/getting-started/intro]

? Which bundler would you like to use? …
Vite    [ https://vitejs.dev/     ]
Webpack [ https://webpack.js.org/ ]
Rspack  [ https://www.rspack.dev/ ]
```
Choose `None`.
```sh title="Terminal" {5}

✔ Which bundler would you like to use? · rspack
? Test runner to use for end to end (E2E) tests …
Playwright [ https://playwright.dev/ ]
Cypress [ https://www.cypress.io/ ]
None
```
When you are prompted to choose styling solution - choose "Tailwind".
```sh title="Terminal" {5}
? Default stylesheet format …
CSS
SASS(.scss)       [ https://sass-lang.com   ]
LESS              [ https://lesscss.org     ]
tailwind          [ https://tailwindcss.com     ]
styled-components [ https://styled-components.com            ]
emotion           [ https://emotion.sh                       ]
styled-jsx        [ https://www.npmjs.com/package/styled-jsx ]
```
Choose `Skip for now` when you are asked to choose CI. 
```sh title="Terminal" {5}
? Set up CI with caching, distribution and test deflaking …
(it's free and can be disabled any time)
Yes, for GitHub Actions with Nx Cloud
Yes, for CircleCI with Nx Cloud
Skip for now
```
Choose `Skip for now` when you are asked for remote caching option
```sh title="Terminal" {4}
? Would you like remote caching to make your build faster? …
(it's free and can be disabled any time)
Yes
Skip for now
```

#### 4. Adding Zephyr
Open the project folder we created with code editor of your choice. Within current working directory, install Zephyr's plugin by running: 
```sh title="Terminal" 
npm i zephyr-webpack-plugin 
``` 
After install the plugin, open the file `rspack.config.ts` in project root and replace the original configuration as below
```js title="rspack.config.js" 
const { composePlugins, withNx, withReact } = require('@nx/rspack');  // [!code --]
    // [!code --]
module.exports = composePlugins(withNx(), withReact(), (config) => { // [!code --]
  return config; // [!code --]
}); // [!code --]

const rspack = require('@rspack/core') // [!code ++]
const refreshPlugin = require('@rspack/plugin-react-refresh') // [!code ++]
const { withZephyr } = require('zephyr-webpack-plugin'); // [!code ++]
const isDev = process.env.NODE_ENV === 'development' // [!code ++]
/** // [!code ++]
 * @type {import('@rspack/cli').Configuration} // [!code ++]
 */ // [!code ++]
module.exports = withZephyr()({ // [!code ++]
  context: __dirname, // [!code ++]
  entry: { // [!code ++]
    main: './src/main.tsx', // [!code ++]
  }, // [!code ++]
  // devServer: { // [!code ++]
  //   historyApiFallback: true, // [!code ++]
  //   port: 8080, // [!code ++]
  // }, // [!code ++]
  resolve: { // [!code ++]
    extensions: ['.js', '.jsx', '.ts', '.tsx', '.json'] // [!code ++]
  }, // [!code ++]
  module: { // [!code ++]
    rules: [ // [!code ++]
      { // [!code ++]
        test: /\.svg$/, // [!code ++]
        type: 'asset', // [!code ++]
      }, // [!code ++]
      { // [!code ++]
        test: /\.scss$/, // [!code ++]
        use: [ // [!code ++]
          { // [!code ++]
            loader: 'postcss-loader', // [!code ++]
            options: {  // [!code ++]
              postcssOptions: { // [!code ++]
                plugins: { // [!code ++]
                  tailwindcss: {},  // [!code ++]
                  autoprefixer: {}, // [!code ++]
                },  // [!code ++]
              },    // [!code ++]
            },  // [!code ++]
          },    // [!code ++]
        ],  // [!code ++]
        type: 'css',    // [!code ++]
      },    // [!code ++]
      { // [!code ++]
        test: /\.(jsx?|tsx?)$/, // [!code ++]
        use: [  // [!code ++]
          { // [!code ++]
            loader: 'builtin:swc-loader',   // [!code ++]
            options: {  // [!code ++]
              sourceMap: true,  // [!code ++]
              jsc: {    // [!code ++]
                parser: {   // [!code ++]
                  syntax: 'typescript', // [!code ++]
                  tsx: true,    // [!code ++]
                },  // [!code ++]
                transform: {    // [!code ++]
                  react: {  // [!code ++]
                    runtime: 'automatic',   // [!code ++]
                    development: isDev, // [!code ++]
                    refresh: isDev, // [!code ++]
                  },    // [!code ++]
                },  // [!code ++]
              },    // [!code ++]
              env: {    // [!code ++]
                targets: [  // [!code ++]
                  'chrome >= 87',   // [!code ++]
                  'edge >= 88', // [!code ++]
                  'firefox >= 78',  // [!code ++]
                  'safari >= 14',   // [!code ++]
                ],  // [!code ++]
              },    // [!code ++]
            },  // [!code ++]
          },    // [!code ++]
        ],  // [!code ++]
      },    // [!code ++]
    ],  // [!code ++]
  },    // [!code ++]
  plugins: [    // [!code ++]
    new rspack.container.ModuleFederationPlugin({   // [!code ++]
      name: 'create_mf_app_rspack', // [!code ++]
      filename: 'remoteEntry.js',   // [!code ++]
      exposes: {},  // [!code ++]
      shared: { // [!code ++]
        react: { eager: true }, // [!code ++]
        'react-dom': { eager: true },   // [!code ++]
        'react-router-dom': { eager: true },    // [!code ++]
      },    // [!code ++]
    }), // [!code ++]
    new rspack.DefinePlugin({   // [!code ++]
      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV), // [!code ++]
    }), // [!code ++]
    new rspack.ProgressPlugin({}),  // [!code ++]
    new rspack.HtmlRspackPlugin({   // [!code ++]
      template: './src/index.html', // [!code ++]
    }), // [!code ++]
    isDev ? new refreshPlugin() : null, // [!code ++]
  ].filter(Boolean),    // [!code ++]
})  // [!code ++]
```
Now you are all set! Go back to the terminal in current project and run 
```sh title="Terminal" 
nx build
```
You will see the terminal output like so - your deployed URL is before the final emitting process:
```sh title="Terminal" {16-18}
❯ nx build

 NX   Its time to update Nx 🎉

Your repository uses a higher version of Nx (19.2.2) than your global CLI version (18.1.2)
For more information, see https://nx.dev/more-concepts/global-nx


> nx run my-first-mf-app:build:production

[zephyr] You are already logged in
●  ━━━━━━━━━━━━━━━━━━━━━━━━━ (70%) sealing chunk ids                                                                                                    
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: uploading missing assets to zephyr (queued 1 out of 2)
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: uploaded local snapshot in 263ms
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: uploaded missing assets to zephyr (1 assets in 144ms, 236.95kb)
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: deploying to https://userName_69-_my-first-mf-app_source-my-f-53eac2-ze.valorkin.dev
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: deploying to https://userName_70-_my-first-mf-app_source-my-f-38438b-ze.valorkin.dev
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: deploying to https://_my-first-mf-app_source-my-first-mf-app-zmzlois-ze.valorkin.dev
●  ━━━━━━━━━━━━━━━━━━━━━━━━━ (98%) emitting emit                                                                                                        
[zephyr]: [_my-first-mf-app_source.my-first-mf-app.username](account)[70]: build deployed in 774ms
●  ━━━━━━━━━━━━━━━━━━━━━━━━━ (100%) emitting after emit                                                                                                 
PublicPath: auto
asset index.html 362 bytes [emitted]
asset main.js 237 KiB [emitted] (name: main)
Entrypoint main 237 KiB = main.js
runtime modules 6 modules
+ 24 modules
Rspack 0.6.5 compiled successfully in 1.35 s (036ed42385758a40269f)

———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

 NX   Successfully ran target build for project my-first-mf-app (2s)
```
Press <Keyboard shortcuts={["Command"]}/> and left click on the URL at the same time to open your deployed URL in your default browser. Meanwhile **open your side panel**. 
<Image src="/deploy-v1.png"/>
## Deleting your account and uninstallation 

1. 







### Browser Support 

<SupportedBrowser/>
